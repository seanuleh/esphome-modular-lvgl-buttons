# Substitution variables used through the codebase
substitutions:
  <<: !include modules/base/mdi_glyph_substitutions.yaml
  lightbulb:         "\U000F0335"
  ceiling_light:     "\U000F0769"
  lamp:              "\U000F06B5"
  floor_lamp:        "\U000F08DD"
  string_lights:     "\U000F12BA"
  track_light:       "\U000F0914"
  bulkhead_light:    "\U000F1A2F"
  led_strip:         "\U000F07D6"
  coach_lamp:        "\U000F1020"
  ceiling_fan_light: "\U000F1798"
  bed:               "\U000F02E3"

  bg_color: black
  icon_font: light40
  icon_font_small: light24
  text_font: roboto24
  text_font_small: roboto18
  text_color: white
  button_on_color: burnt_sienna
  button_off_color: very_dark_gray
  icon_on_color: "yellow"
  icon_off_color: "gray"
  label_on_color: white
  label_off_color: gray
  button_text_color: "white"
  button_height_single: '135px'
  button_height_double: '270px'
  button_width: '151px'
  touchscreen_idle_timeout: "30s"
  touchscreen_daytime_brightness: "100%"
  touchscreen_nighttime_brightness: "50%"
  boot_screen_delay: 5s
  header_height: 20px
  footer_height: 30px
  screen_night_hour: '0'
  screen_night_minute: '0'
  screen_day_hour: '5'
  screen_day_minute: '30'
  screen_height: '480px'
  screen_width: '480px'
  sdl_height: '480'
  sdl_width: '480'

esphome:
  name: "desktop-dash"
  friendly_name: "desktop-dash"
  comment: "Sean Bedroom Desktop Dash"

api:
  on_client_connected:
    - if:
        condition:
          lambda: 'return (0 == client_info.find("Home Assistant "));'
        then:
          - lvgl.widget.show: lbl_hastatus
          - delay: 2s
          - script.execute: update_seanpc_display
          - script.execute: update_ginapc_display
  on_client_disconnected:
    - if:
        condition:
          lambda: 'return (0 == client_info.find("Home Assistant "));'
        then:
          - lvgl.widget.hide: lbl_hastatus

color:
  # - id: white
  #   red: 100%
  #   green: 100%
  #   blue: 100%
  # - id: gray
  #   red: 50%
  #   green: 50%
  #   blue: 50%

mqtt:
  broker: 192.168.1.99
  on_message:
    - topic: monitor/input/state
      then:
        - text_sensor.template.publish:
            id: monitor_input_state
            state: !lambda 'return x;'
    - topic: monitor/kvm_usb/state
      then:
        - text_sensor.template.publish:
            id: kvm_input_state
            state: !lambda 'return x;'
    - topic: usbswitch/output/state
      then:
        - text_sensor.template.publish:
            id: usbswitch_output_state
            state: !lambda 'return x;'

globals:
  - id: seanpc_pending
    type: bool
    restore_value: no
    initial_value: 'false'
  - id: ginapc_pending
    type: bool
    restore_value: no
    initial_value: 'false'

binary_sensor:
  - platform: homeassistant
    id: seanpc_status
    entity_id: binary_sensor.seanpc_status
    on_state:
      then:
        - globals.set:
            id: seanpc_pending
            value: 'false'
        - lvgl.widget.hide: seanpc_spinner
        - lvgl.label.update:
            id: seanpc_status_icon
            text_color: !lambda "return x ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
        - lvgl.label.update:
            id: seanpc_status_text
            text: !lambda 'return x ? std::string("ON") : std::string("OFF");'
            text_color: !lambda "return x ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
  - platform: homeassistant
    id: ginapc_status
    entity_id: binary_sensor.ginapc_status
    on_state:
      then:
        - globals.set:
            id: ginapc_pending
            value: 'false'
        - lvgl.widget.hide: ginapc_spinner
        - lvgl.label.update:
            id: ginapc_status_icon
            text_color: !lambda "return x ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
        - lvgl.label.update:
            id: ginapc_status_text
            text: !lambda 'return x ? std::string("ON") : std::string("OFF");'
            text_color: !lambda "return x ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"

text_sensor:
  - platform: template
    name: "Monitor Input State"
    id: monitor_input_state
    internal: true
    on_value:
      - if:
          condition: { lambda: 'return x == "pc";' }
          then:
            - lvgl.label.update: { id: lbl_monitor_pc_icon, text: $mdi_radiobox_marked }
            - lvgl.label.update: { id: lbl_monitor_mac_icon, text: $mdi_radiobox_blank }
          else:
            - lvgl.label.update: { id: lbl_monitor_pc_icon, text: $mdi_radiobox_blank }
            - lvgl.label.update: { id: lbl_monitor_mac_icon, text: $mdi_radiobox_marked }
  - platform: template
    name: "KVM Input State"
    id: kvm_input_state
    internal: true
    on_value:
      - if:
          condition: { lambda: 'return x == "pc";' }
          then:
            - lvgl.label.update: { id: lbl_kvm_pc_icon, text: $mdi_radiobox_marked }
            - lvgl.label.update: { id: lbl_kvm_mac_icon, text: $mdi_radiobox_blank }
          else:
            - lvgl.label.update: { id: lbl_kvm_pc_icon, text: $mdi_radiobox_blank }
            - lvgl.label.update: { id: lbl_kvm_mac_icon, text: $mdi_radiobox_marked }
  - platform: template
    name: "USB Switch Output State"
    id: usbswitch_output_state
    internal: true
    on_value:
      - if:
          condition: { lambda: 'return x == "pc";' }
          then:
            - lvgl.label.update: { id: lbl_usbswitch_pc_icon, text: $mdi_radiobox_marked }
            - lvgl.label.update: { id: lbl_usbswitch_mac_icon, text: $mdi_radiobox_blank }
          else:
            - lvgl.label.update: { id: lbl_usbswitch_pc_icon, text: $mdi_radiobox_blank }
            - lvgl.label.update: { id: lbl_usbswitch_mac_icon, text: $mdi_radiobox_marked }

time:
  - platform: sntp        
    id: sntp_time
    timezone: Australia/Melbourne
    servers:
     - 0.pool.ntp.org
     - 1.pool.ntp.org
     - 2.pool.ntp.org
    on_time_sync:
      - script.execute: time_update
    on_time:
      - minutes: '*'
        seconds: 0
        then:
          - script.execute: time_update

script:
  - id: time_update
    then:
      - lvgl.label.update:
          id: display_time
          text: !lambda |-
            static char time_buf[17];
            auto now = id(sntp_time).now();            
            bool is_pm = now.hour >= 12;
            int hour_12 = now.hour % 12;
            if (hour_12 == 0) {
                hour_12 = 12; // 12 AM/PM should be displayed as 12, not 0
            }
            snprintf(time_buf, sizeof(time_buf), "%2d:%02d%s", hour_12, now.minute, is_pm ? "pm" : "am");
            return time_buf;
  - id: update_seanpc_display
    then:
      - lvgl.label.update:
          id: seanpc_status_icon
          text_color: !lambda "return id(seanpc_status).state ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
      - lvgl.label.update:
          id: seanpc_status_text
          text: !lambda 'return id(seanpc_status).state ? std::string("ON") : std::string("OFF");'
          text_color: !lambda "return id(seanpc_status).state ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
  - id: update_ginapc_display
    then:
      - lvgl.label.update:
          id: ginapc_status_icon
          text_color: !lambda "return id(ginapc_status).state ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
      - lvgl.label.update:
          id: ginapc_status_text
          text: !lambda 'return id(ginapc_status).state ? std::string("ON") : std::string("OFF");'
          text_color: !lambda "return id(ginapc_status).state ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
  - id: seanpc_wake_action
    then:
      - globals.set:
          id: seanpc_pending
          value: 'true'
      - lvgl.widget.show: seanpc_spinner
      - homeassistant.service:
          service: rest_command.upsnap_wake
          data:
            device_id: "ihbgmfc7e5v83gj"
      - delay: 30s  # Timeout after 30 seconds
      - if:
          condition:
            lambda: 'return id(seanpc_pending);'
          then:
            - lvgl.widget.hide: seanpc_spinner
            - globals.set:
                id: seanpc_pending
                value: 'false'
  - id: seanpc_shutdown_action
    then:
      - globals.set:
          id: seanpc_pending
          value: 'true'
      - lvgl.widget.show: seanpc_spinner
      - homeassistant.service:
          service: rest_command.upsnap_shutdown
          data:
            device_id: "ihbgmfc7e5v83gj"
      - delay: 30s  # Timeout after 30 seconds
      - if:
          condition:
            lambda: 'return id(seanpc_pending);'
          then:
            - lvgl.widget.hide: seanpc_spinner
            - globals.set:
                id: seanpc_pending
                value: 'false'
  - id: ginapc_wake_action
    then:
      - globals.set:
          id: ginapc_pending
          value: 'true'
      - lvgl.widget.show: ginapc_spinner
      - homeassistant.service:
          service: rest_command.upsnap_wake
          data:
            device_id: "09edkzf2x5h5e9i"
      - delay: 30s
      - if:
          condition:
            lambda: 'return id(ginapc_pending);'
          then:
            - lvgl.widget.hide: ginapc_spinner
            - globals.set:
                id: ginapc_pending
                value: 'false'
  - id: ginapc_shutdown_action
    then:
      - globals.set:
          id: ginapc_pending
          value: 'true'
      - lvgl.widget.show: ginapc_spinner
      - homeassistant.service:
          service: rest_command.upsnap_shutdown
          data:
            device_id: "09edkzf2x5h5e9i"
      - delay: 30s
      - if:
          condition:
            lambda: 'return id(ginapc_pending);'
          then:
            - lvgl.widget.hide: ginapc_spinner
            - globals.set:
                id: ginapc_pending
                value: 'false'

packages:
  # Generic configuration for ESP32 screens
  wifi: !include 
    file: modules/base/wifi.yaml
    vars:
      use_address: 192.168.1.61
  base: !include modules/base/base.yaml
  touchscreen: !include modules/base/touchscreen.yaml
  backlight: !include modules/base/backlignt.yaml
  colors: !include modules/base/color.yaml
  fonts: !include modules/base/fonts.yaml
  images: !include modules/base/images.yaml
  sensors: !include modules/sensors/sensors_base.yaml
  theme_style: !include modules/base/theme_style.yaml
  hardware: !include modules/hardware/guition-esp32-s3-4848s040.yaml

  btn_sean_cover_office: !include
    file: modules/sensors/cover_state.yaml
    vars:
      uid: btn_sean_cover_office
      entity_id: cover.sean_s_office_blind

  btn_sean_cover_blinds: !include
    file: modules/sensors/cover_state.yaml
    vars:
      uid: btn_sean_cover_blinds
      entity_id: cover.sean_s_office_blind

  btn_living_cover_blinds: !include
    file: modules/sensors/cover_state.yaml
    vars:
      uid: btn_living_cover_blinds
      entity_id: cover.living_room_blind

  btn_master_cover_blinds: !include
    file: modules/sensors/cover_state.yaml
    vars:
      uid: btn_master_cover_blinds
      entity_id: cover.master_bedroom_blind

# LVGL pages and buttons
lvgl:
  top_layer: !include
    file: modules/screens/header_footer.yaml
    vars:
      height: $screen_height
      width: $screen_width
  pages:
    - id: main_page
      layout:
        type: flex
        flex_flow: COLUMN
      styles: page_style
      width: $screen_width
      bg_color: $bg_color
      bg_opa: cover
      widgets:
        - obj: !include
            file: modules/screens/header_title_object.yaml
            vars:
              title: Office
        - obj:
            width: 100%
            height: 70px
            align: CENTER
            layout:
              type: flex
              flex_flow: ROW_WRAP
              flex_align_main: CENTER
              flex_align_cross: CENTER
            widgets:
              - button: !include
                  file: modules/buttons/cover_blind_slider.yaml
                  vars:
                    uid: btn_sean_cover_office
                    width: 100%
                    height: 70px # Single height for bar
                    text: Blinds
                    icon: $mdi_blinds
                    entity_id: cover.sean_s_office_blind
        - obj:
            width: 100%
            height: 340px
            layout: 
              type: flex
              flex_flow: COLUMN
              flex_align_main: SPACE_BETWEEN
              flex_align_cross: CENTER
            widgets:
              # PC Power Buttons
              - obj:
                  width: 100%
                  height: 65px
                  radius: 10
                  layout:
                    type: grid
                    grid_columns: ['33%', '33%', '33%']  # Changed from ['50%', '50%'] to 3 columns
                    grid_rows: ['100%']
                  widgets:
                    # SeanPC Button
                    - button:
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 0
                        width: 100%
                        height: 100%
                        bg_opa: TRANSP
                        on_press:
                          then:
                            - lambda: |-
                                if (id(seanpc_status).state) {
                                  id(seanpc_shutdown_action).execute();
                                } else {
                                  id(seanpc_wake_action).execute();
                                }
                        widgets:
                          - obj:
                              width: 100%
                              height: 100%
                              pad_all: 0
                              bg_opa: TRANSP
                              clickable: false
                              layout:
                                type: flex
                                flex_flow: ROW
                                flex_align_main: START
                                flex_align_cross: CENTER
                              widgets:
                                - label:
                                    id: seanpc_status_icon
                                    text: $mdi_power
                                    text_font: $icon_font
                                    text_color: !lambda "return id(seanpc_status).state ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
                                - obj:
                                    width: 80px 
                                    height: 100%
                                    pad_all: 0
                                    bg_opa: TRANSP
                                    clickable: false
                                    layout:
                                      type: flex
                                      flex_flow: COLUMN
                                      flex_align_main: START
                                      flex_align_cross: START
                                      pad_row: 0
                                    widgets:
                                      - label: { text: "SeanPC", text_font: roboto18 }
                                      - label:
                                          id: seanpc_status_text
                                          text: !lambda 'return id(seanpc_status).state ? std::string("ON") : std::string("OFF");'
                                          text_color: !lambda "return id(seanpc_status).state ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
                                          text_font: roboto18
                    # Spinner column (column 1)
                    - obj:
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 1
                        grid_cell_x_align: STRETCH
                        grid_cell_y_align: STRETCH
                        width: 100%
                        height: 100%
                        bg_opa: TRANSP
                        widgets:
                          - spinner:
                              id: seanpc_spinner
                              hidden: true
                              width: 35
                              height: 35
                              align: CENTER
                              spin_time: 800ms
                              arc_length: 60
                              arc_width: 3        # Background donut thickness
                              arc_color: 0xFFFFFF # Background donut color (white)
                              indicator:
                                arc_color: 0xFF9800  # Spinning arc color (orange)
                                arc_width: 3         # Spinning arc thickness
                          - spinner:
                              id: ginapc_spinner
                              hidden: true
                              width: 35
                              height: 35
                              align: CENTER
                              spin_time: 800ms
                              arc_length: 60
                              arc_width: 3
                              arc_color: 0xFFFFFF
                              indicator:
                                arc_color: 0xFF9800
                                arc_width: 3
                    # GinaPC Button
                    - button:
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 2
                        grid_cell_x_align: STRETCH
                        grid_cell_y_align: STRETCH
                        width: 100%
                        height: 100%
                        bg_opa: TRANSP
                        on_press:
                          then:
                            - lambda: |-
                                if (id(ginapc_status).state) {
                                  id(ginapc_shutdown_action).execute();
                                } else {
                                  id(ginapc_wake_action).execute();
                                }
                        widgets:
                          - obj:
                              width: 100%
                              height: 100%
                              pad_all: 0
                              pad_right: 5  # Padding from the right edge
                              bg_opa: TRANSP
                              clickable: false
                              layout:
                                type: flex
                                flex_flow: ROW
                                flex_align_main: END  # Push to right
                                flex_align_cross: CENTER
                              widgets:
                                - obj:
                                    width: 70px
                                    height: 100%
                                    pad_all: 0
                                    bg_opa: TRANSP
                                    clickable: false
                                    layout:
                                      type: flex
                                      flex_flow: COLUMN
                                      flex_align_main: START
                                      flex_align_cross: END
                                      pad_row: 0
                                    widgets:
                                      - label: 
                                          text: "GinaPC"
                                          text_font: roboto18
                                          pad_all: 0
                                          text_align: RIGHT
                                          width: 100%
                                      - label:
                                          id: ginapc_status_text
                                          text: !lambda 'return id(ginapc_status).state ? std::string("ON") : std::string("OFF");'
                                          text_color: !lambda "return id(ginapc_status).state ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
                                          text_font: roboto18
                                          pad_all: 0
                                          text_align: RIGHT
                                          width: 100%
                                - label:
                                    id: ginapc_status_icon
                                    text: $mdi_power
                                    text_font: $icon_font
                                    text_color: !lambda "return id(ginapc_status).state ? lv_color_hex(0x4CAF50) : lv_color_hex(0xF44336);"
                                    pad_all: 0
                                    pad_left: 0
              # Input Matrix Grid
              - obj:
                  width: 100%
                  height: 25px
                  bg_color: $button_off_color
                  bg_opa: COVER
                  layout:
                    type: grid
                    grid_columns: ['33%', '33%', '33%']
                    grid_rows: ['100%']
                  widgets:
                    - label:
                        text: "MUX"
                        text_font: roboto18
                        text_color: white
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 0
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                    - label:
                        text: "PC"
                        text_font: roboto18
                        text_color: white
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 1
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                    - label: 
                        text: "Mac" 
                        text_font: roboto18
                        text_color: white
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 2
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
              # Monitor Input Row
              - obj:
                  width: 100%
                  height: 50px
                  radius: 10
                  layout:
                    type: grid
                    grid_columns: ['33%', '33%', '33%']
                    grid_rows: ['100%']
                  widgets:
                    - label: 
                        text: $mdi_monitor
                        text_font: $icon_font
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 0
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                    - button:
                        id: btn_monitor_pc
                        bg_opa: TRANSP
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 1
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                        on_press:
                          - mqtt.publish: { topic: "monitor/input/set", payload: "pc" }
                        widgets: [{ label: { id: lbl_monitor_pc_icon, text: $mdi_radiobox_blank, text_font: $icon_font_small, align: CENTER } }]
                    - button:
                        id: btn_monitor_mac
                        bg_opa: TRANSP
                        on_press:
                          - mqtt.publish: { topic: "monitor/input/set", payload: "mac" }
                        widgets: [{ label: { id: lbl_monitor_mac_icon, text: $mdi_radiobox_blank, text_font: $icon_font_small, align: CENTER } }]
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 2
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
              # Monitor KVM Row
              - obj:
                  width: 100%
                  height: 50px
                  radius: 10
                  layout:
                    type: grid
                    grid_columns: ['33%', '33%', '33%']
                    grid_rows: ['100%']
                  widgets:
                    - label: 
                        text: $mdi_monitor_share
                        text_font: $icon_font
                        bg_opa: TRANSP
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 0
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                    - button:
                        id: btn_kvm_pc
                        bg_opa: TRANSP
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 1
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                        on_press:
                          - mqtt.publish: { topic: "monitor/kvm_usb/set", payload: "pc" }
                        widgets: [{ label: { id: lbl_kvm_pc_icon, text: $mdi_radiobox_blank, text_font: $icon_font_small, align: CENTER } }]
                    - button:
                        id: btn_kvm_mac
                        bg_opa: TRANSP
                        on_press:
                          - mqtt.publish: { topic: "monitor/kvm_usb/set", payload: "mac" }
                        widgets: [{ label: { id: lbl_kvm_mac_icon, text: $mdi_radiobox_blank, text_font: $icon_font_small, align: CENTER } }]
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 2
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
              # USB Switch Row
              - obj:
                  width: 100%
                  height: 50px
                  radius: 10
                  layout:
                    type: grid
                    grid_columns: ['33%', '33%', '33%']
                    grid_rows: ['100%']
                  widgets:
                    - label: 
                        text: $mdi_usb
                        text_font: $icon_font
                        bg_opa: TRANSP
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 0
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                    - button:
                        id: btn_usb_switch_pc
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 1
                        bg_opa: TRANSP
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                        on_press:
                          - mqtt.publish: { topic: "usbswitch/output/set", payload: "pc" }
                        widgets: [{ label: { id: lbl_usbswitch_pc_icon, text: $mdi_radiobox_blank, text_font: $icon_font_small, align: CENTER } }]
                    - button:
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 2
                        bg_opa: TRANSP
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                        id: btn_usb_switch_mac
                        on_press:
                          - mqtt.publish: { topic: "usbswitch/output/set", payload: "mac" }
                        widgets: [{ label: { id: lbl_usbswitch_mac_icon, text: $mdi_radiobox_blank, text_font: $icon_font_small, align: CENTER } }]
              # Desktop Monitor Title
              - obj:
                  width: 100%
                  height: 25px
                  bg_color: $button_off_color
                  bg_opa: COVER
                  radius: 10
                  layout:
                    type: grid
                    grid_columns: ['100%']
                    grid_rows: ['100%']
                  widgets:
                    - label: 
                        text: "PC Monitor"
                        text_font: roboto18
                        text_color: white
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 0
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
              # Desktop Monitor Buttons
              - obj:
                  width: 100%
                  height: 50px
                  radius: 10
                  layout:
                    type: grid
                    grid_columns: ['33%', '33%', '33%']
                    grid_rows: ['100%']
                  widgets:
                    - button:
                        id: switch_to_dualscreen
                        bg_opa: TRANSP
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 0
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                        widgets:
                          - label:
                              id: switch_to_dualscreen_label
                              align: CENTER
                              text: $mdi_monitor_multiple
                              text_font: $icon_font
                        on_press:
                          - homeassistant.service:
                              service: button.press
                              data:
                                entity_id: button.9800x3d_displaydualscreen
                    - button:
                        id: switch_to_oled
                        bg_opa: TRANSP
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 1
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                        widgets:
                          - label:
                              id: switch_to_oled_label
                              align: CENTER
                              text: $mdi_monitor_small
                              text_font: $icon_font
                        on_press:
                          - homeassistant.service:
                              service: button.press
                              data:
                                entity_id: button.9800x3d_displayoledonly
                    - button:
                        id: switch_to_ultrawide
                        bg_opa: TRANSP
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 2
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                        widgets:
                          - label:
                              id: switch_to_ultrawide_label
                              align: CENTER
                              text: $mdi_monitor
                              text_font: $icon_font
                        on_press:
                          - homeassistant.service:
                              service: button.press
                              data:
                                entity_id: button.9800x3d_displayultrawideonly
              # Desktop Monitor Labels
              - obj:
                  width: 100%
                  height: 20px
                  radius: 10
                  layout:
                    type: grid
                    grid_columns: ['33%', '33%', '33%']
                    grid_rows: ['100%']
                  widgets:
                    - button:
                        id: switch_to_dualscreen_btn_label
                        bg_opa: TRANSP
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 0
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                        widgets:
                          - label:
                              align: CENTER
                              id: switch_to_dualscreen_text_label
                              text: "Dual Screen"
                              text_font: roboto18
                              text_color: white
                        on_press:
                          - homeassistant.service:
                              service: button.press
                              data:
                                entity_id: button.9800x3d_displaydualscreen
                    - button:
                        id: switch_to_oled_btn_label
                        bg_opa: TRANSP
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 1
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                        widgets:
                          - label:
                              align: CENTER
                              id: switch_to_oled_text_label
                              text: "OLED"
                              text_font: roboto18
                              text_color: white
                        on_press:
                          - homeassistant.service:
                              service: button.press
                              data:
                                entity_id: button.9800x3d_displayoledonly
                    - button:
                        id: switch_to_ultrawide_btn_label
                        bg_opa: TRANSP
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 2
                        grid_cell_x_align: CENTER
                        grid_cell_y_align: CENTER
                        widgets:
                          - label:
                              align: CENTER
                              id: switch_to_ultrawide_text_label
                              text: "Ultrawide"
                              text_font: roboto18
                              text_color: white
                        on_press:
                          - homeassistant.service:
                              service: button.press
                              data:
                                entity_id: button.9800x3d_displayultrawideonly

        # - obj:
        #     width: 100%
        #     height: $button_height_single
        #     align: CENTER
        #     layout:
        #       type: flex
        #       flex_flow: ROW_WRAP
        #       flex_align_main: CENTER
        #       flex_align_cross: CENTER
        #     widgets:
        #       - button:
        #           id: switch_to_dualscreen
        #           height: $button_height_single
        #           widgets:
        #             - label:
        #                 id: switch_to_dualscreen_label
        #                 align: CENTER
        #                 text: $mdi_monitor_multiple
        #                 text_font: $icon_font
        #             - label:
        #                 align: bottom_mid
        #                 id: switch_to_dualscreen_text_label
        #                 text: "Dual Screen"
        #                 text_font: $text_font_small
        #           on_press:
        #             - homeassistant.service:
        #                 service: button.press
        #                 data:
        #                   entity_id: button.9800x3d_displaydualscreen
        #       - button:
        #           id: switch_to_oled
        #           height: $button_height_single
        #           widgets:
        #             - label:
        #                 id: switch_to_oled_label
        #                 align: CENTER
        #                 text: $mdi_monitor_small
        #                 text_font: $icon_font
        #             - label:
        #                 align: bottom_mid
        #                 id: switch_to_oled_text_label
        #                 text: "OLED Only"
        #                 text_font: $text_font_small
        #           on_press:
        #             - homeassistant.service:
        #                 service: button.press
        #                 data:
        #                   entity_id: button.9800x3d_displayoledonly
        #       - button:
        #           id: switch_to_ultrawide
        #           height: $button_height_single
        #           widgets:
        #             - label:
        #                 id: switch_to_ultrawide_label
        #                 align: CENTER
        #                 text: $mdi_monitor
        #                 text_font: $icon_font
        #             - label:
        #                 align: bottom_mid
        #                 id: switch_to_ultrawide_text_label
        #                 text: "Ultrawide Only"
        #                 text_font: $text_font_small
        #           on_press:
        #             - homeassistant.service:
        #                 service: button.press
        #                 data:
        #                   entity_id: button.9800x3d_displayultrawideonly
    - id: blinds_page
      layout:
        type: flex
        flex_flow: ROW_WRAP
        flex_align_cross: CENTER
        flex_align_main: CENTER
      styles: page_style
      width: $screen_width
      bg_color: $bg_color
      bg_opa: cover
      widgets:
        - obj: !include
            file: modules/screens/header_title_object.yaml
            vars:
              title: Blinds
        - button: !include
            file: modules/buttons/cover_blind_button.yaml
            vars:
              uid: btn_sean_cover_blinds
              height: $button_height_double
              text: Office
              icon: $mdi_blinds
              entity_id: cover.sean_s_office_blind
        - button: !include
            file: modules/buttons/cover_blind_button.yaml
            vars:
              uid: btn_living_cover_blinds
              height: $button_height_double
              text: Living
              icon: $mdi_blinds
              entity_id: cover.living_room_blind
        - button: !include
            file: modules/buttons/cover_blind_button.yaml
            vars:
              uid: btn_master_cover_blinds
              height: $button_height_double
              text: Master
              icon: $mdi_blinds
              entity_id: cover.master_bedroom_blind
        - button:
            id: open_all_blinds
            height: $button_height_single
            widgets:
              - label:
                  id: open_all_blinds_label
                  align: CENTER
                  text: $mdi_blinds_open
                  text_font: $icon_font
              - label:
                  align: bottom_mid
                  id: open_all_blinds_text_label
                  text: "Open All"
            on_press:
              - homeassistant.action:
                  action: cover.open_cover
                  data:
                    entity_id: cover.master_bedroom_blind
              - homeassistant.action:
                  action: cover.open_cover
                  data:
                    entity_id: cover.living_room_blind
              - homeassistant.action:
                  action: cover.open_cover
                  data:
                    entity_id: cover.sean_s_office_blind
        - button:
            id: close_all_blinds
            height: $button_height_single
            widgets:
              - label:
                  id: close_all_blinds_label
                  align: CENTER
                  text: $mdi_blinds
                  text_font: $icon_font
              - label:
                  align: bottom_mid
                  id: close_all_blinds_text_label
                  text: "Close All"
            on_press:
              - homeassistant.action:
                  action: cover.close_cover
                  data:
                    entity_id: cover.master_bedroom_blind
              - homeassistant.action:
                  action: cover.close_cover
                  data:
                    entity_id: cover.living_room_blind
              - homeassistant.action:
                  action: cover.close_cover
                  data:
                    entity_id: cover.sean_s_office_blind
    - id: about_page
      layout:
        type: flex
        flex_flow: COLUMN_WRAP
      styles: page_style
      width: 100%
      bg_color: $bg_color
      bg_opa: cover
      widgets:
        - obj: !include
            file: modules/screens/header_title_object.yaml
            vars:
              title: About
        - image:
            src: boot_logo_90px
            pad_bottom: 10
        - label:
            id: esphome_version_label
            text:
              format: "ESPHome Version: %s"
              args: [ 'id(esphome_version).state.c_str()' ]
        - label:
            text:
              format: "Build Date: %s - %s"
              args: [__DATE__, __TIME__]
        - label:
            id: connected_mac_label
            text: "MAC Address: Not Connected"
        - label:
            id: ip_address_label
            text: "IP Address: Not Connected"
        - label:
            id: connected_ssid_label
            text: "Connected SSID: Not Connected"
        - label:
            id: wifi_signal_db_percent_label
            text: "WiFi Strength: Not Connected"
        - button:
            id: reset_connection
            widgets:
              - label:
                  id: reset_connection_label
                  align: CENTER
                  text: $mdi_restart
                  text_font: $icon_font
            on_press:
              - wifi.disable:
              - delay: 3s
              - wifi.enable:
